{
  "name": "Zservices",
  "tagline": "Serviços de pesquisas nos portais federais e estaduais do Brasil.",
  "body": "# zServices\r\n\r\n[![Latest Stable Version](https://poser.pugx.org/zservices/query/v/stable)](https://packagist.org/packages/zservices/query) [![Total Downloads](https://poser.pugx.org/zservices/query/downloads)](https://packagist.org/packages/zservices/query) [![Latest Unstable Version](https://poser.pugx.org/zservices/query/v/unstable)](https://packagist.org/packages/zservices/query) [![License](https://poser.pugx.org/zservices/query/license)](https://packagist.org/packages/zservices/query)\r\n[![Build Status](https://api.travis-ci.org/juniorb2ss/zServices.svg?branch=master)](https://travis-ci.org/juniorb2ss/zServices)\r\n[![Dependency Status](https://gemnasium.com/badges/github.com/juniorb2ss/zServices.svg)](https://gemnasium.com/github.com/juniorb2ss/zServices)\r\n[![Issues Status](https://img.shields.io/github/issues/juniorb2ss/zServices.svg)](https://github.com/juniorb2ss/zServices/issues)\r\n[![Stars Status](https://img.shields.io/github/stars/juniorb2ss/zServices.svg)](https://github.com/juniorb2ss/zServices/stargazers)\r\n[![Code Climate](https://codeclimate.com/github/juniorb2ss/zServices/badges/gpa.svg)](https://codeclimate.com/github/juniorb2ss/zServices)\r\n[![Issue Count](https://codeclimate.com/github/juniorb2ss/zServices/badges/issue_count.svg)](https://codeclimate.com/github/juniorb2ss/zServices)\r\n[![Test Coverage](https://codeclimate.com/github/juniorb2ss/zServices/badges/coverage.svg)](https://codeclimate.com/github/juniorb2ss/zServices/coverage)\r\n[![Scrutinizer Code Quality](https://scrutinizer-ci.com/g/juniorb2ss/zServices/badges/quality-score.png?b=master)](https://scrutinizer-ci.com/g/juniorb2ss/zServices/?branch=master)\r\n\r\nPacote para buscar informações nos serviços federais e estaduais do Brasil\r\n\r\nÉ feito uma requisição no serviço, retornando `cookie` e `captcha` do serviço. Após usuário informar\r\no captcha é feito outra requisição, retornando informações do CNPJ.\r\n\r\nEste pacote deverá ser usado com responsabilidade, o autor e contribuidores não devem responder pelas implementações/ações feita com este pacote.\r\n\r\n### Atenção\r\n\r\nEste pacote foi desenvolvido com o intuito de facilidade consultas através de ERP ou serviços que necessitam de consistência de dados. Não foi criado com o intuito de ser utilizado como `bot`\r\n\r\nToda implementação será de sua responsabilidade.\r\n\r\n### Version Stable\r\n1.0.3\r\n\r\n### Instalação\r\n\r\n```sh\r\n$ composer require zservices/query 1.*\r\n$ cd vendor/zServices/Query && phpunit\r\n```\r\n### Laravel 5\r\nConfigure os providers e aliases em `config/app.php`\r\n```php\r\n'providers' => [\r\n    // ....\r\n      zServices\\Laravel\\zServicesProvider::class,\r\n    //...\r\n];\r\n\r\n'aliases' => [\r\n    //...\r\n    'Sintegra' => zServices\\Laravel\\zServicesSintegraFacade::class,\r\n    'ReceitaFederal' => zServices\\Laravel\\zServicesReceitaFederalFacade::class,\r\n    //...\r\n];\r\n```\r\n```php\r\nuse ReceitaFederal;\r\n$service = ReceitaFederal::service()->request();\r\n\r\nreturn view('receitafederal.query.example',[\r\n    'cookie' => $service->cookie(),\r\n    'image'  => $service->captcha()\r\n]);\r\n```\r\n### Exemplos\r\n#### Receita Federal\r\n\r\n```php\r\nuse zServices\\ReceitaFederal\\Search as ReceitaFederal;\r\n$search = (new ReceitaFederal)->service()->request(); // initialize\r\n\r\n$captchaBase64Image = $search->captcha(); // captura base64_decode da imagem\r\n$cookieRequest = $search->cookie(); // captura o cookie do request iniciado\r\n\r\n```\r\n\r\nDados após o form\r\n```php\r\n// Requisitar dados\r\nuse zServices\\ReceitaFederal\\Search as ReceitaFederal;\r\n\r\n$search = (new ReceitaFederal)->service();\r\n$crawler = $search->data($cnpj, $cookie, $captcha, []);\r\n$arrayData = $crawler->scraping(); // array com as informações da entidade\r\n```\r\nPara consultar receita federal basta pegar o cookie e a imagem do captcha, após resolver o captcha é preciso\r\nretornar o cookie e a string resolvida para o serviço, ele deverá retornar um array associado com as informações\r\ndo CNPJ informado.\r\n#### Sintegra SP\r\n\r\nDados para form\r\n\r\n```php\r\nuse zServices\\Sintegra\\Search as Sintegra;\r\n$search = (new Sintegra)->service('SP')->request(); // initialize\r\n\r\n$captchaBase64Image = $search->captcha(); // captura base64_decode da imagem\r\n$cookieRequest = $search->cookie(); // captura o cookie do request iniciado\r\n$params = $search->params(); // captura o valor dos inputs\r\n$paramBot = $params['parambot']; // captura parambot\r\n\r\n```\r\n\r\nDados após o form\r\n```php\r\n// Requisitar dados\r\nuse zServices\\Sintegra\\Search as Sintegra;\r\n\r\n$search = (new Sintegra)->service('SP');\r\n$crawler = $search->data($cnpj, $cookie, $captcha, $paramBot);\r\n$arrayData = $crawler->scraping(); // array com as informações da entidade\r\n\r\n```\r\nO portal do sintega de SP além do captcha possui um valor no formulário com nome de `paramBot`. Este valor é único por requisição, não por cookie. Então para que a requisição funcione corretamente é preciso pegar e devolver ele nas requisições posteriores.\r\n\r\nO método `$search->params()` devolve um array com os inputs que são necessários devolver, que no caso do sintegra de sp é apenas `paramBot`. Este valor deverá ser inserido em seu formulário e devolvido como array associado na requisição das informações da entidade.\r\n\r\n### Retornos\r\nImagem de exemplo com as informações de retorno do serviço.\r\n#### Receita Federal\r\n![Retorno](https://camo.githubusercontent.com/50a04fb56500e16b07deb7afceeccb16bfc3809a/687474703a2f2f7333322e706f7374696d672e6f72672f7236306775726467352f53637265656e73686f745f66726f6d5f323031365f30345f32385f31385f34335f31332e706e67)\r\n#### Sintegra SP\r\n![Retorno](https://uploaddeimagens.com.br/images/000/612/350/original/Screenshot_from_2016-05-01_16-51-52.png?1462132324)\r\n\r\n\r\n### Desenvolvimento\r\nDeseja contribuir com desenvolvimento? pull request :)\r\n\r\n### To-do\r\n\r\nLicense\r\n----\r\nMIT\r\n\r\n**Free Software, Hell Yeah!**\r\n\r\n[//]: # (These are reference links used in the body of this note and get stripped out when the markdown processor does its job. There is no need to format nicely because it shouldn't be seen. Thanks SO - http://stackoverflow.com/questions/4823468/store-comments-in-markdown-syntax)\r\n\r\n",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}